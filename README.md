# Spring Web App

## Описание

**Spring Web App** — учебное веб-приложение на Spring Boot, реализующее каталог пользователей и книг с возможностью
управления ими через современный UI. Используются Hibernate (JPA), PostgreSQL, Thymeleaf, кастомная серверная валидация
и адаптивный дизайн.

---

## Основные возможности

- CRUD для пользователей и книг
- Привязка книг к пользователям и освобождение книг
- Серверная валидация (аннотации + кастомные валидаторы)
- Современный адаптивный интерфейс (CSS, JS, анимации)
- Кастомная страница ошибок

---

## Технологии

- Java 17+
- Spring Boot
- Hibernate (JPA)
- PostgreSQL
- Maven
- Thymeleaf
- Lombok
- CSS/JS

---

## Структура проекта

```
src/
 ├─ main/
 │   ├─ java/com/example/springWebApp/
 │   │   ├─ controller/         # Контроллеры Spring MVC
 │   │   ├─ DAO/                # Data Access Object (Hibernate)
 │   │   ├─ Model/              # Модели данных (Book, People)
 │   │   ├─ util/               # Валидаторы
 │   │   ├─ webConfig/          # Конфигурация Hibernate
 │   ├─ resources/
 │   │   ├─ templates/          # Thymeleaf-шаблоны (HTML)
 │   │   │   ├─ booksViews/     # Страницы для книг
 │   │   │   ├─ people.html     # Список пользователей
 │   │   │   ├─ show.html       # Страница пользователя
 │   │   │   ├─ edit.html       # Редактирование пользователя
 │   │   │   ├─ new.html        # Добавление пользователя
 │   │   │   ├─ error.html      # Кастомная страница ошибки
 │   │   ├─ static/
 │   │   │   ├─ css/style.css   # Основные стили
 │   │   │   ├─ js/index.js     # JS-анимации
 │   │   │   ├─ js/error-anim.js# Анимация для error.html
 │   │   │   ├─ img/            # Картинки и иконки
```

---

## Быстрый старт

1. **Запустите PostgreSQL в Docker**

   Для локального запуска БД используйте Docker:

   ```bash
   docker run --name spring-pg -e POSTGRES_DB=postgres -e POSTGRES_USER=postgres -e POSTGRES_PASSWORD=root -p 5432:5432 -d postgres:15
   ```

    - База данных: `postgres`
    - Пользователь: `postgres`
    - Пароль: `root`
    - Порт: `5432`

2. **Настройте подключение**

   В проекте уже прописаны параметры подключения к этой БД (см. `HibernateConfiguration.java`).

3. **Соберите и запустите приложение**

   ```bash
   mvn clean install
   mvn spring-boot:run
   ```

---

**Важно:**  
Для работы приложения требуется, чтобы контейнер PostgreSQL был запущен.  
Если вы используете другую БД или параметры, измените их в настройках проекта.

---

## Структура таблиц

**people**

- people_id (PK, serial)
- people_name (varchar)
- people_age (int)
- email (varchar, уникальный)
- people_address (varchar)

**books**

- book_id (PK, serial)
- title (varchar)
- author (varchar)
- age (int)
- people_id (FK, nullable)

---

## Основные страницы

### Пользователи

- `/people/all` — список всех пользователей
- `/people/{id}` — страница пользователя и его книги
- `/people/new` — форма добавления пользователя
- `/people/{id}/edit` — форма редактирования пользователя
- Удаление — кнопка на странице пользователя

### Книги

- `/books/list` — список всех книг
- `/books/{id}` — страница книги, владелец, назначение/освобождение
- `/books/new` — форма добавления книги
- `/books/{id}/edit` — форма редактирования книги
- Удаление — кнопка на странице книги

---

## Валидация

- Используются аннотации JSR-303 (`@NotEmpty`, `@Size`, `@Email`, и др.)
- Кастомные валидаторы:
    - Проверка уникальности email пользователя
    - Проверка уникальности названия книги
- Ошибки отображаются под соответствующими полями формы

---

## Обработка ошибок

- Глобальный обработчик ошибок (`@ControllerAdvice`)
- Кастомная страница ошибки с анимацией

---

## Как расширять

- Для новых сущностей: создайте модель, DAO, контроллер, шаблоны
- Для новых связей: добавьте поля и методы в DAO и контроллеры
- Для новых страниц: используйте существующую структуру шаблонов и стилей

---

## Тестирование

- Для контроллеров — Spring MockMvc
- Для DAO — интеграционные тесты с тестовой БД

---

## Автор

tadohopsky

---